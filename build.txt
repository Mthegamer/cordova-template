HOWTO build cordova / phonegap
==================================

This is a brief description, currently only for android and ios, on how to build apps from source.

I) Prerequisites 
================
This is an example, node.js is actually just used for installing other stuff.

1) 	install node.js (not explained here)

2) 	install cordova:
	$ sudo npm install -g cordova
        if this fails epically, try: npm cache clean

3) 	install java, android sdk, apache ant

	a) 	download & install java sdk from http://www.oracle.com/technetwork/java/javase/downloads/index.html
		check install: $ java -version

	b) 	download & install android sdk from http://developer.android.com/sdk/index.html

	c)	download install apache ant from http://ant.apache.org/bindownload.cgi

	d)	set paths according to your environment, e.g.
		$ export JAVA_HOME=$(/usr/libexec/java_home)
		$ export ANDROID_PLATFORM_TOOLS=/Users/bob/dev/android_adt/sdk/platform-tools
		$ export ANDROID_TOOLS=/Users/bob/dev/android_adt/sdk/tools
		$ export ANT_HOME=/Users/bob/dev/apache-ant-1.9.2
		$ export PATH=$PATH:$ANDROID_PLATFORM_TOOLS:$ANDROID_TOOLS:$ANT_HOME/bin
		
5) 	install xcode (mac only, via appstore not described here)

6) 	start xcode and agree to license agreement

7) 	install ios sim (for cordova)
	$ sudo npm install -g ios-sim


II) Create Cordova Project for Android and iOS
===============================================

1) prerequisites: check/enable execution mode for the build-scripts. (something like: chmod 755 *.sh)

2) build comes in 3 flavors:

    a) complete clean & rebuild including cordova project, cordova platforms and plugins, takes a while
    ==> must be used if first time build after checkout, can be used for consecutive builds as well

    $ buildscripts/0_completebuild_all_platforms.sh

    b) platforms only build, a bit faster, no clean of target dir
    ==> can be used if sources in web client or platform specific resources (e.g. icons) have changed

    $ buildscripts/rebuild_all_platforms.sh

    c) web-rerources only: just a sync of the web-client to the cordova build dir plus cordova rebuild

    $ buildscripts/0_rebuild_web_resources.sh


3) Every complete build generates a "target/project" directory that contains all of the artifacts generated by cordova including the
necessary platform-specific stuff (resources, config), and the web-client of course. Each platform has a specific directory.

    a) android
    target/project/platforms/android/bin contains the apk that can be installed to a device

    b) ios
    target/project/platforms/ios contains a "project.xcodeproj" file that can be opened with xcode.
    Use xcode to generate ipa or directly deploy to device/emulator. NOT DESCRIBED HERE!



III) Production builds
===============================================

For production builds you need the platform-specific certificates to sign the binaries. Then the build process has
to include the keys and the sign the binaries. NOT DESCRIBED HERE!
